"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[463],{74774:function(n,e,t){var o=t(82729),a=t(85893),r=t(19521),i=t(41664),s=t.n(i),l=t(25935),d=t(67294),c=t(9473),m=t(63750),u=t(8193),p=t(5434),h=t(11163),g=t(68241),f=t(26541),x=t(99063),b=t(83192),k=t(29195),v=t(11527),w=t(26245),j=t(63877),y=t(25021),A=t(83482),N=t(85307),D=t(76e3),F=t(55280);function _templateObject(){let n=(0,o._)(["\n  "," {\n    border-radius: 0px;\n\n    border-bottom: 1px solid\n      ",";\n\n    background: none;\n    color: ",";\n\n    .club {\n      color: ",";\n    }\n\n    padding: 1rem 0rem;\n    height: fit-content;\n    transition-duration: 0.2s;\n    position: relative;\n\n    :hover {\n      transition-duration: 0.2s;\n      background: none;\n    }\n\n    .dropdown-container {\n      position: absolute;\n      top: 9px;\n      right: 9px;\n\n      .dropdown-toggle {\n        position: relative;\n\n        .dropdown {\n          right: 0px;\n          position: absolute;\n          width: 200px;\n          height: fit-content;\n          background-color: #0f1524;\n          background: ",';\n\n          border-radius: 7px;\n          overflow: hidden;\n          z-index: 1;\n\n          button {\n            all: unset;\n            width: 100%;\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            padding: 10px;\n            font-size: 10px;\n            font-weight: 600;\n            font-size: 15px;\n            font-family: "Work Sans", sans-serif;\n\n            :hover {\n              cursor:\n                url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC)\n                  14 0,\n                pointer;\n              background-color: ',";\n            }\n          }\n\n          .delete {\n            color: #e76e55;\n          }\n\n          .update {\n          }\n\n          .report:hover {\n            /* color: #e7cb02; */\n          }\n        }\n\n        .three-dots {\n          border-radius: 50px;\n          line-height: 1;\n          padding: 0.5rem;\n          transition-duration: 0.2s;\n        }\n\n        .three-dots:hover {\n          background-color: ",';\n          transition-duration: 0.2s;\n        }\n      }\n    }\n\n    .author {\n      display: flex;\n      align-items: center;\n      gap: 0.5rem;\n      font-size: 15px;\n\n      p {\n        margin: 0px;\n        font-family: "Work Sans", sans-serif;\n        font-weight: 500;\n      }\n\n      .author-img-container {\n        flex-shrink: 0;\n        img {\n          width: 30px;\n          height: 30px;\n          border-radius: 50%;\n          transition-duration: 0.2s;\n          background-color: #e4e5e7;\n        }\n\n        img:hover {\n          transition-duration: 0.2s;\n          opacity: 0.85;\n        }\n      }\n\n      .username-container {\n        display: flex;\n        align-items: center;\n        gap: 0.5rem;\n        max-width: 250px;\n\n        .name {\n          display: flex;\n          align-items: center;\n          gap: 0.15rem;\n          max-width: 79%;\n          white-space: nowrap;\n\n          span {\n            flex-shrink: 0;\n            img {\n              width: 25px;\n              height: auto;\n            }\n          }\n        }\n\n        .dot {\n          margin-top: -8px;\n          color: rgba(128, 128, 128, 1);\n        }\n      }\n\n      .author-username {\n        font-weight: 500;\n        max-width: 200px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        color: rgba(128, 128, 128, 1);\n        font-weight: 400;\n        font-size: 15px;\n        transition-duration: 0.2s;\n      }\n\n      /* .author-username:hover {\n      transition-duration: 0.2s;\n      color: #0278f6;\n    } */\n\n      .author-name {\n        transition-duration: 0.2s;\n      }\n\n      .author-name:hover {\n        transition-duration: 0.2s;\n        color: #0278f6;\n      }\n\n      .time-since-created {\n        color: #808080;\n        font-weight: 400;\n\n        .ago-tag {\n          display: none;\n        }\n      }\n    }\n\n    .post {\n      .post-title {\n        margin: 1rem auto;\n        margin-bottom: 0.8rem;\n        font-size: 18px;\n        font-weight: 600;\n        font-family: "Work Sans", sans-serif;\n        word-break: break-word;\n      }\n    }\n\n    .post-image-container {\n      margin: 1rem auto;\n      display: flex;\n      justify-content: center;\n      background-color: transparent;\n\n      img {\n        width: 100%;\n        height: auto;\n        border-radius: 10px;\n      }\n    }\n  }\n\n  '," {\n    padding: 1rem;\n    padding-bottom: 0.75rem;\n    border-radius: 18px;\n    border: 2px solid ",";\n    background: ",";\n\n    .post {\n      .post-title {\n        font-size: 18px;\n        margin: 1rem auto;\n        margin-bottom: 1rem;\n      }\n    }\n\n    .author {\n      .username-container {\n        max-width: 450px;\n\n        .name {\n          max-width: none;\n        }\n      }\n\n      .time-since-created {\n        .ago-tag {\n          display: inline-block;\n        }\n      }\n    }\n\n    .post-image-container {\n      margin: 1rem auto;\n      display: flex;\n      justify-content: start;\n      border-radius: 10px;\n\n      img {\n        max-height: 570px;\n      }\n    }\n\n    :hover {\n      background: ",";\n    }\n  }\n"]);return _templateObject=function(){return n},n}function _templateObject1(){let n=(0,o._)(["\n  max-height: 300px;\n  overflow: hidden;\n  word-break: break-word;\n  -webkit-mask-image: linear-gradient(180deg, #000 70%, transparent);\n\n  "," {\n    &.smaller-height-mobile {\n      max-height: 100px;\n      -webkit-mask-image: linear-gradient(180deg, #000 10%, transparent);\n    }\n  }\n\n  "," {\n    &.smaller-height-mobile {\n      max-height: 300px;\n      -webkit-mask-image: linear-gradient(180deg, #000 70%, transparent);\n    }\n  }\n"]);return _templateObject1=function(){return n},n}let C=r.default.div.withConfig({componentId:"sc-fbf568db-0"})(_templateObject(),n=>{let{theme:e}=n;return e.breakpoints.xs},n=>{let{theme:e}=n;return"dark"==e.mode?e.colors.palette.grey["800"]:e.colors.palette.grey["200"]},n=>"dark"===n.theme.mode?"rgba(255, 255, 255, 0.87)":"black",n=>"dark"===n.theme.mode?"#FFD601":"#987316",n=>"dark"===n.theme.mode?"#0f1524":"#F6F6F6",n=>"dark"===n.theme.mode?"rgba(237, 231, 225, 0.1)":"#DADADA",n=>"dark"===n.theme.mode?"rgba(255, 255, 255, 0.07)":"#DADADA",n=>{let{theme:e}=n;return e.breakpoints.sm},n=>n.theme.colors.profileBorder,n=>"dark"===n.theme.mode?"#1d2332":"#FFFFFF",n=>!n.showDropDown&&("dark"===n.theme.mode?"#22293a":"#f7f7f7")),S=r.default.div.withConfig({componentId:"sc-fbf568db-1"})(_templateObject1(),n=>{let{theme:e}=n;return e.breakpoints.xs},n=>{let{theme:e}=n;return e.breakpoints.sm});e.Z=function(n){var e,t,o;let{postData:r,link:i,communityName:E,index:z,loadedImage:I}=n,Z=(0,d.useRef)(null),B=(0,c.v9)(w.f8);(0,h.useRouter)();let U=(0,d.useMemo)(()=>j.F,[]),[R,_]=(0,d.useState)(!1),[L,M]=(0,d.useState)(!1),[O,P]=(0,d.useState)(!1),[T,Q]=(0,d.useState)(!1),[W,V]=(0,d.useState)(!1),q=(0,d.useRef)(null),G=(0,N.Z)(null==r?void 0:null===(e=r.authorData)||void 0===e?void 0:e.totalXp),{height:X,width:Y}=(0,k.Z)(null==r?void 0:null===(t=r.images[0])||void 0===t?void 0:t.url);function handleClick(n){"A"===n.target.tagName&&n.stopPropagation()}return(0,d.useEffect)(()=>{async function reportStatus(){try{let n=await (0,y.Y)(r.id,B,r.communityName);!1===n?_(!1):_(!0)}catch(n){console.error("Error fetching report:",n)}}r&&B&&reportStatus()},[r,B]),(0,d.useEffect)(()=>{if(Z.current){let n=document.querySelector("#post".concat(r.postId)).scrollHeight,e=Z.current.clientHeight;n-e<200&&(Z.current.style.maxHeight="fit-content",Z.current.style.webkitMaskImage="initial")}},[r.postId,Z]),(0,d.useEffect)(()=>{let n=Z.current;if(n)return n.addEventListener("click",handleClick),()=>{n.removeEventListener("click",handleClick)}},[Z]),(0,a.jsxs)(C,{className:"nes-pointer opc-post-container",showDropDown:L,onMouseEnter:function(){q.current=setTimeout(()=>{var n;V(!0),(0,D.lZ)({username:null==r?void 0:null===(n=r.authorData)||void 0===n?void 0:n.username})},500)},onMouseLeave:function(){clearTimeout(q.current),V(!1)},children:[(0,a.jsxs)(s(),{href:i,style:{all:"unset"},children:[T&&(0,a.jsx)(b.Z,{postId:r.postId,setShowUserLikes:Q,communityName:r.communityName}),O&&(0,a.jsx)(x.Z,{setShowReportForm:P,postId:r.id,userUid:B,handleCancelReport:function(n){n.stopPropagation(),P(!1)},handleReport:function(n){n.stopPropagation();try{(0,A.Z)(r.id,B,r.communityName),_(!0),P(!1)}catch(n){console.log(n)}}}),(0,a.jsx)("div",{className:"dropdown-container",children:(0,a.jsxs)("div",{className:"dropdown-toggle",children:[(0,a.jsx)("div",{className:"three-dots",onClick:n=>{n.preventDefault(),n.stopPropagation(),M(!L)},children:(0,a.jsx)(m.evw,{size:20,className:"nes-pointer"})}),L&&(0,a.jsxs)("div",{className:"dropdown",children:[B===r.ownerUid&&(0,a.jsx)(s(),{href:"main"==r.communityName?"/community/post/".concat(null==r?void 0:r.id,"?phase=edit"):"monthly-challenge"==r.communityName?"/community/monthly-challenge/submission/".concat(null==r?void 0:r.id,"?phase=edit"):"/community/".concat(r.communityName,"/").concat(null==r?void 0:r.id,"?phase=edit"),legacyBehavior:!0,children:(0,a.jsxs)("button",{className:"update",children:[(0,a.jsx)(u.$iz,{}),"Edit"]})}),!R&&(0,a.jsxs)("button",{className:"report",onClick:n=>{n.preventDefault(),n.stopPropagation(),M(!L),P(!O)},children:[(0,a.jsx)(p.Ssb,{color:""}),"Report"]})]})]})}),(0,a.jsxs)("div",{className:"author",children:[(0,a.jsx)(s(),{href:"/@".concat(r.authorData.username),legacyBehavior:!0,children:(0,a.jsx)("div",{className:"author-img-container nes-pointer",children:(0,a.jsx)("img",{src:r.authorData.photoURL,alt:"author profile picture",loading:"lazy"})})}),(0,a.jsx)(s(),{href:"/@".concat(r.authorData.username),legacyBehavior:!0,children:(0,a.jsxs)("div",{className:"username-container",children:[(0,a.jsxs)("div",{className:"name",children:[(0,a.jsx)("p",{className:"author-name nes-pointer ".concat((null===(o=r.authorData)||void 0===o?void 0:o.club)?"club":""),children:r.authorData.name}),(0,a.jsx)("span",{children:(0,a.jsx)("img",{className:"rank-badge",src:G.badge,alt:"user rank badge",loading:"lazy"})}),(0,a.jsxs)("p",{className:"author-username nes-pointer",children:["@",r.authorData.username]})]}),(0,a.jsx)("p",{className:"dot",children:"."}),r.createdAt._seconds&&(0,a.jsx)("p",{className:"time-since-created",children:U(null==r?void 0:r.createdAt)})]})})]}),(0,a.jsx)(s(),{href:i,legacyBehavior:!0,children:(0,a.jsxs)("div",{className:"post nes-pointer",children:[(0,a.jsx)("h2",{className:"post-title",children:r.title}),(0,a.jsx)(F.Z,{videoFiles:null==r?void 0:r.videoFiles,disableAutoPlayOnView:!1}),0!=r.images.length&&(0,a.jsx)("div",{className:"post-image-container",children:(0,a.jsx)("div",{onClick:n=>n.preventDefault(),children:(0,a.jsx)(v.Z,{src:r.images[0].url,alt:"post images",style:{width:X<570&&Y>574?"100%":"auto"},onLoad:()=>{0===z&&I&&I()},loading:z>2?"lazy":"eager"})})}),r.content&&(0,a.jsx)(S,{ref:Z,id:"post".concat(r.postId),className:0==z&&"smaller-height-mobile",children:(0,a.jsx)(g.Z,{children:(0,l.ZP)(r.content.replace(/`([^`]+)`/g,'<span className="backtick-code-block">$1</span>'))})})]})})]}),(0,a.jsx)(f.Z,{postLikes:null==r?void 0:r.userLikes,numberOfComments:null==r?void 0:r.userComments,postId:null==r?void 0:r.id,communityName:r.communityName,postData:r,setShowUserLikes:Q})]})}}}]);