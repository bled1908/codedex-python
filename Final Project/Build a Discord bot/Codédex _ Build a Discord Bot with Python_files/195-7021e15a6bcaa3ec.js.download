"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[195],{25670:function(n,e,t){var s=t(82729),i=t(85893),a=t(19521);function _templateObject(){let n=(0,s._)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 5rem;\n  img {\n    width: 75px;\n    height: auto;\n  }\n"]);return _templateObject=function(){return n},n}let o=a.default.div.withConfig({componentId:"sc-8ff57c93-0"})(_templateObject());e.Z=function(){return(0,i.jsx)(o,{children:(0,i.jsx)("img",{src:"/images/community/loader.svg",alt:"loader",className:"spinning-loader"})})}},68241:function(n,e,t){var s=t(82729),i=t(85893),a=t(19521);function _templateObject(){let n=(0,s._)(["\n  ",' {\n    font-family: "Work Sans", sans-serif;\n    font-size: 15px;\n\n    a {\n      word-break: break-word;\n      color: #1e9ced;\n    }\n\n    p {\n      margin: 0px;\n      font-size: 15px;\n    }\n\n    ul {\n      margin: 0rem;\n    }\n\n    ol {\n      margin: 0px;\n    }\n\n    pre {\n      font-family: "Work Sans", sans-serif;\n      background-color: #0d1117;\n      border-radius: 5px;\n      position: relative;\n      padding: 8px 10px;\n      white-space: pre-wrap;\n      color: rgba(255, 255, 255, 0.87) !important;\n      word-break: break-word;\n      margin: 5px 0px;\n      code {\n        display: block;\n        font-family: monospace;\n        font-size: inherit;\n        padding: 1rem 2rem;\n      }\n    }\n    word-break: break-word;\n\n    .backtick-code-block,\n    code {\n      font-family: "Work Sans", sans-serif;\n      background-color: ',";\n      padding: 4px 6px 4px 6px;\n      border-radius: 5px;\n\n      color: rgb(181, 186, 192);\n    }\n  }\n\n  "," {\n    font-size: 16px;\n  }\n"]);return _templateObject=function(){return n},n}let o=a.default.div.withConfig({componentId:"sc-f757c50c-0"})(_templateObject(),n=>{let{theme:e}=n;return e.breakpoints.xs},n=>"dark"===n.theme.mode?"#1d2332":"#EFF4F7",n=>{let{theme:e}=n;return e.breakpoints.sm});e.Z=function(n){let{children:e}=n;return(0,i.jsx)(o,{children:e})}},63877:function(n,e,t){t.d(e,{F:function(){return getTimeDifference},i:function(){return formatTimestamp}});var s=t(85893);function getTimeDifference(n){let e=n._seconds+n._nanoseconds/1e9,t=Date.now()/1e3,i=t-e;return i<60?(0,s.jsxs)("span",{children:[Math.floor(i),"s ",(0,s.jsx)("span",{className:"ago-tag",children:"ago"})]}):i<3600?(0,s.jsxs)("span",{children:[Math.floor(i/60),"m ",(0,s.jsx)("span",{className:"ago-tag",children:"ago"})]}):i<86400?(0,s.jsxs)("span",{children:[Math.floor(i/3600),"h ",(0,s.jsx)("span",{className:"ago-tag",children:"ago"})]}):i<2592e3?(0,s.jsxs)("span",{children:[Math.floor(i/86400),"d ",(0,s.jsx)("span",{className:"ago-tag",children:"ago"})]}):(0,s.jsxs)("span",{children:[Math.floor(i/2592e3),"mo"," ",(0,s.jsx)("span",{className:"ago-tag",children:"ago"})]})}function formatTimestamp(n){let e=n._seconds+n._nanoseconds/1e9,t=new Date(1e3*e).toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0}),i=new Date(1e3*e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return(0,s.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"rgba(128, 128, 128, 1)",fontSize:"13px",fontWeight:"500"},children:[i," ",(0,s.jsx)("span",{className:"dot",style:{marginTop:"-7px"},children:"."})," ",t]})}t(67294)},83192:function(n,e,t){var s=t(82729),i=t(85893),a=t(19521),o=t(67294),r=t(5434),l=t(58533),c=t(25670),d=t(41664),p=t.n(d);function _templateObject(){let n=(0,s._)(["\n    from {\n        transform: scale(0.8);\n        visibility: hidden;\n        opacity: 0;\n    } to {\n        transform: scale(1);\n        visibility: visible;\n        opacity: 1;\n    }\n"]);return _templateObject=function(){return n},n}function _templateObject1(){let n=(0,s._)(['\n  z-index: 9999;\n  position: fixed;\n  display: flex;\n  justify-content: center;\n  /* align-items: center; */\n  width: 100%;\n  height: 100%;\n  top: 0px;\n  left: 0px;\n  background: rgba(0, 0, 0, 0.5);\n  color: whitesmoke;\n  font-family: "Work Sans", sans-serif;\n\n  .container {\n    position: relative;\n    border: 2px solid\n      ',";\n    background: ",";\n    color: ",";\n    animation: "," 0.2s ease-in;\n    width: 450px;\n    max-width: 95vw;\n    height: fit-content;\n    max-height: 550px;\n    overflow-y: auto;\n    border-radius: 10px;\n    margin-top: 10rem;\n\n    .close-btn {\n      all: unset;\n      position: absolute;\n      right: 10px;\n      top: 10px;\n      font-size: 25px;\n      line-height: 0.8;\n      transition-duration: 0.2s;\n      padding: 0.2rem;\n      color: ",";\n\n      :hover {\n        background-color: hsla(61, 6%, 90%, 0.3);\n        border-radius: 50%;\n        cursor:\n          url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAzElEQVRYR+2X0Q6AIAhF5f8/2jYXZkwEjNSVvVUjDpcrGgT7FUkI2D9xRfQETwNIiWO85wfINfQUEyxBG2ArsLwC0jioGt5zFcwF4OYDPi/mBYKm4t0U8ATgRm3ThFoAqkhNgWkA0jJLvaOVSs7j3qMnSgXWBMiWPXe94QqMBMBc1VZIvaTu5u5pQewq0EqNZvIEMCmxAawK0DNkay9QmfFNAJUXfgGgUkLaE7j/h8fnASkxHTz0DGIBMCnBeeM7AArpUd3mz2x3C7wADglA8BcWMZhZAAAAAElFTkSuQmCC)\n            14 0,\n          pointer;\n      }\n    }\n\n    h2 {\n      padding: 1rem;\n      margin-bottom: -1rem;\n      font-size: 22px;\n    }\n    .users {\n      display: flex;\n      flex-direction: column;\n\n      .single-user {\n        display: flex;\n        align-items: center;\n        gap: 1rem;\n        padding: 1rem 1rem 1rem 1rem;\n\n        img {\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n        }\n\n        .single-user-info {\n          p {\n            margin: 0px;\n          }\n\n          .name {\n            font-weight: 600;\n          }\n\n          .username {\n            color: #808080;\n          }\n        }\n\n        :hover {\n          transition-duration: 0.2s;\n          background: ",";\n        }\n      }\n    }\n  }\n"]);return _templateObject1=function(){return n},n}let m=(0,a.keyframes)(_templateObject()),u=a.default.div.withConfig({componentId:"sc-553844b6-0"})(_templateObject1(),n=>"dark"===n.theme.mode?"rgba(36, 76, 115, 1)":"#DADADA",n=>"dark"===n.theme.mode?"#1d2332":"#FFFFFF",n=>"dark"===n.theme.mode?"rgba(255, 255, 255, 0.87)":"black",m,n=>"dark"===n.theme.mode?"rgba(255, 255, 255, 0.87)":"black",n=>"dark"===n.theme.mode?"#22293a":"#f7f7f7");e.Z=function(n){let{postId:e,setShowUserLikes:t,communityName:s}=n,a=(0,o.useRef)(null),[d,m]=(0,o.useState)([]),[h,g]=(0,o.useState)(1),[f,x]=(0,o.useState)(!0),k=(0,o.useCallback)(async()=>{let n=await fetch("/api/community/getLikedList?communityName=".concat(s,"&postId=").concat(e)),t=await n.json();m(t.posts),t.posts.length<9&&x(!1)},[]);(0,o.useEffect)(()=>{k()},[k]);let j=(0,o.useCallback)(async()=>{try{let n=h+1,t=await fetch("/api/community/getLikedList?communityName=".concat(s,"&postId=").concat(e,"&page=").concat(n)),i=await t.json(),a=i.posts;0!=a.length&&(g(n),m(n=>[...n,...a])),a.length<9&&x(!1)}catch(n){console.error("Error fetching more posts:",n)}},[h,m,s,e]);return(0,i.jsx)(u,{onClick:n=>{n.stopPropagation(),t(!1)},children:(0,i.jsxs)("div",{className:"container",ref:a,id:"like-by-scroll",children:[(0,i.jsx)("button",{className:"close-btn nes-pointer",onClick:n=>{n.stopPropagation(),t(!1)},children:(0,i.jsx)(r.lTq,{})}),(0,i.jsx)("h2",{children:"Liked by"}),(0,i.jsx)(l.Z,{dataLength:d.length,next:j,hasMore:f,loader:(0,i.jsx)(c.Z,{}),scrollableTarget:"like-by-scroll",children:(0,i.jsx)("div",{className:"users",children:d&&d.map(n=>{var e,t,s,a;return(0,i.jsx)(p(),{href:"/community/profile/@".concat(null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.username),legacyBehavior:!0,children:(0,i.jsxs)("div",{className:"single-user",children:[(0,i.jsx)("img",{src:null==n?void 0:null===(t=n.user)||void 0===t?void 0:t.photoURL,alt:"liked user image"}),(0,i.jsxs)("div",{className:"single-user-info",children:[(0,i.jsx)("p",{className:"name",children:null==n?void 0:null===(s=n.user)||void 0===s?void 0:s.name}),(0,i.jsxs)("p",{className:"username",children:["@",null==n?void 0:null===(a=n.user)||void 0===a?void 0:a.username]})]})]})},null==n?void 0:n.id)})})})]})})}},82446:function(n,e,t){var s=t(85893),i=t(67294),a=t(9473),o=t(39828),r=t(11163),l=t(92369),c=t(26245),d=t(77478);e.Z=function(n){let{postData:e,postId:t,likes:p,communityName:m,setShowUserLikes:u,showLikeListtoggle:h=!1}=n;(0,r.useRouter)();let g=(0,i.useRef)(null),f=(0,a.v9)(c.f8),[x,k]=(0,i.useState)(!1),[j,w]=(0,i.useState)(p),[b,y]=(0,i.useState)(!0),[v,C]=(0,i.useState)(!1);(0,i.useEffect)(function(){w(p)},[p]),(0,i.useEffect)(function(){(async function(){if(f){let{firestore:n}=(0,l.UM)(),e=(0,o.JU)(n,"community",m,"posts",t,"likes",f),s=await (0,o.QT)(e);k(s.exists()),y(!1)}else setTimeout(()=>y(!1),1e3)})()},[t,f,m]);let N=(0,i.useCallback)(async function(n){if(n.stopPropagation(),"processing"===g.current||b)return;g.current="processing";let s={type:"like",postOwnerUid:e.ownerUid,senderUid:f,postId:t,postLink:"main"===m?"/post/".concat(t):"/".concat(m,"/").concat(t),postTitle:e.title,postContent:e.content};if(f){try{let{firestore:n}=(0,l.UM)(),e=(0,o.qs)(n),s=(0,o.JU)((0,o.hJ)(n,"community",m,"posts"),t),i=(0,o.JU)((0,o.hJ)(n,"community",m,"posts",t,"likes"),f);e.set(s,{userLikes:(0,o.nP)(1)},{merge:!0}),e.set(i,{uid:f}),k(!0),w(n=>n+1),C(!0),await e.commit()}catch(n){console.error("Error adding like:",n)}g.current=null,f!=e.ownerUid&&(0,d.s)(s.type,s.postOwnerUid,s.senderUid,s.postId,s.postLink,s.postTitle,s.postContent)}},[b,e.ownerUid,e.title,e.content,f,t,m]),A=(0,i.useCallback)(async function(n){if(n.stopPropagation(),!b&&"processing"!==g.current&&(g.current="processing",f)){let{firestore:n}=(0,l.UM)(),e=(0,o.qs)(n),s=(0,o.JU)((0,o.hJ)(n,"community",m,"posts"),t),i=(0,o.JU)((0,o.hJ)(n,"community",m,"posts"),t,"likes",f),a=(await (0,o.QT)(s)).data().likes;a<1?e.set(s,{userLikes:0},{merge:!0}):e.set(s,{userLikes:(0,o.nP)(-1)},{merge:!0}),e.delete(i),k(!1);let r=j-1;r<0?w(0):w(r),await e.commit(),g.current=null}},[b,f,m,t,j]);return(0,s.jsx)(s.Fragment,{children:f?x?(0,s.jsxs)("span",{className:"likes nes-pointer",children:[(0,s.jsxs)("div",{className:"inner-like-container",style:{display:"flex",gap:".4rem"},onClick:n=>A(n),children:[(0,s.jsx)("button",{className:"heart nes-pointer ".concat(v?"animate":""),type:"button",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"rgba(248, 100, 99, 1)",width:"20",height:"18",children:(0,s.jsx)("path",{d:"M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"})})}),(0,s.jsx)("div",{className:"stat",children:(0,s.jsx)("span",{style:{fontWeight:"500",color:"rgba(248, 100, 99, 1)"},children:b?"...":j<=0?0:j})})]}),0!=j&&h&&(0,s.jsxs)("span",{className:"like-list-toggle",onClick:n=>{n.stopPropagation(),0!=j&&u(!0)},children:["(",(0,s.jsx)("span",{className:"text",children:"View"}),")"]})]}):(0,s.jsxs)("span",{className:"likes nes-pointer",children:[(0,s.jsxs)("div",{className:"inner-like-container",style:{display:"flex",gap:".4rem"},onClick:n=>N(n),children:[(0,s.jsx)("button",{className:"heart nes-pointer",type:"button",children:(0,s.jsx)("svg",{width:"19",height:"19",viewBox:"0 0 17 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M8.13281 1.625L8.47656 2L8.85156 1.65625C9.88281 0.625 11.3516 0.15625 12.7578 0.40625C14.9141 0.75 16.5078 2.625 16.5078 4.8125V4.96875C16.5078 6.28125 15.9453 7.53125 15.0078 8.40625L9.35156 13.6875C9.13281 13.9062 8.82031 14 8.50781 14C8.16406 14 7.85156 13.9062 7.63281 13.6875L1.97656 8.40625C1.03906 7.53125 0.507812 6.28125 0.507812 4.96875V4.8125C0.507812 2.625 2.07031 0.75 4.22656 0.40625C5.63281 0.15625 7.10156 0.625 8.13281 1.625C8.13281 1.65625 8.10156 1.625 8.13281 1.625ZM8.47656 4.125L7.07031 2.6875C6.38281 2.03125 5.41406 1.71875 4.47656 1.875C3.03906 2.125 2.00781 3.34375 2.00781 4.8125V4.96875C2.00781 5.875 2.35156 6.71875 3.00781 7.3125L8.50781 12.4375L13.9766 7.3125C14.6328 6.71875 15.0078 5.875 15.0078 4.96875V4.8125C15.0078 3.34375 13.9453 2.125 12.5078 1.875C11.5703 1.71875 10.6016 2.03125 9.91406 2.6875L8.47656 4.125Z",fill:"#808080"})})}),(0,s.jsx)("div",{className:"stat",children:(0,s.jsx)("span",{children:b?"...":j<=0?0:j})})]}),0!=j&&h&&(0,s.jsxs)("span",{className:"like-list-toggle",onClick:n=>{n.stopPropagation(),0!=j&&u(!0)},children:["(",(0,s.jsx)("span",{className:"text",children:"View"}),")"]})]}):(0,s.jsxs)("span",{className:"tooltip nes-pointer",children:[(0,s.jsx)("span",{className:"tooltiptext nes-balloon from-left",children:"Login to like this post!"}),(0,s.jsxs)("span",{className:"likes not-signed-in-likes",children:[(0,s.jsx)("svg",{width:"19",height:"19",viewBox:"0 0 17 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M8.13281 1.625L8.47656 2L8.85156 1.65625C9.88281 0.625 11.3516 0.15625 12.7578 0.40625C14.9141 0.75 16.5078 2.625 16.5078 4.8125V4.96875C16.5078 6.28125 15.9453 7.53125 15.0078 8.40625L9.35156 13.6875C9.13281 13.9062 8.82031 14 8.50781 14C8.16406 14 7.85156 13.9062 7.63281 13.6875L1.97656 8.40625C1.03906 7.53125 0.507812 6.28125 0.507812 4.96875V4.8125C0.507812 2.625 2.07031 0.75 4.22656 0.40625C5.63281 0.15625 7.10156 0.625 8.13281 1.625C8.13281 1.65625 8.10156 1.625 8.13281 1.625ZM8.47656 4.125L7.07031 2.6875C6.38281 2.03125 5.41406 1.71875 4.47656 1.875C3.03906 2.125 2.00781 3.34375 2.00781 4.8125V4.96875C2.00781 5.875 2.35156 6.71875 3.00781 7.3125L8.50781 12.4375L13.9766 7.3125C14.6328 6.71875 15.0078 5.875 15.0078 4.96875V4.8125C15.0078 3.34375 13.9453 2.125 12.5078 1.875C11.5703 1.71875 10.6016 2.03125 9.91406 2.6875L8.47656 4.125Z",fill:"#808080"})})," ",(0,s.jsx)("span",{children:b?"...":j<=0?0:j}),0!=j&&h&&(0,s.jsxs)("span",{className:"like-list-toggle",onClick:n=>{n.stopPropagation(),0!=j&&u(!0)},children:["(",(0,s.jsx)("span",{className:"text",children:"View"}),")"]})]})]})})}},77478:function(n,e,t){t.d(e,{s:function(){return createNotification}});var s=t(39828),i=t(92369);async function createNotification(n,e,t,a,o,r,l){let c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;if(!e||!t||!a||!o)throw Error("postOwnerUid, senderUid, postId, and postLink are required fields.");let{firestore:d}=(0,i.UM)();try{let i=(0,s.JU)(d,"communityNotifications",e),p=(0,s.hJ)(i,"notifications"),m=(0,s.IO)(p,(0,s.ar)("type","==",n),(0,s.ar)("postId","==",a),(0,s.ar)("senderUid","==",t)),u=await (0,s.PL)(m);if(0!==u.size)return{status:204};{let e={type:n,senderUid:t,postId:a,postTitle:r,postContent:l,postLink:o,read:!1,createdAt:(0,s.Bt)(),parentPostId:c};return await (0,s.ET)(p,e),{status:200}}}catch(n){throw Error("Error creating notification: "+n.message)}}}}]);